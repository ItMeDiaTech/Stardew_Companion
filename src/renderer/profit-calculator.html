<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
    <title>Crop Profit Calculator - Stardew Companion</title>
</head>
<body>
    <div id="app">
        <header class="titlebar">
            <div class="titlebar-drag-region">
                <div class="app-title">Stardew Companion - Crop Profit Calculator</div>
            </div>
            <div class="window-controls">
                <button class="window-button" id="minimize-btn" aria-label="Minimize">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <rect x="0" y="5" width="12" height="2"/>
                    </svg>
                </button>
                <button class="window-button" id="maximize-btn" aria-label="Maximize">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <rect x="0" y="0" width="12" height="12" fill="none" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </button>
                <button class="window-button close-btn" id="close-btn" aria-label="Close">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <path d="M 0 0 L 12 12 M 12 0 L 0 12" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </button>
            </div>
        </header>

        <nav class="navbar">
            <a href="index.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 2L2 7h2v6h3V9h2v4h3V7h2L8 2z"/>
                </svg>
                Home
            </a>
            <a href="villagers.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 8c1.7 0 3-1.3 3-3S9.7 2 8 2 5 3.3 5 5s1.3 3 3 3zm0 2c-2.3 0-7 1.2-7 3.5V15h14v-1.5C15 11.2 10.3 10 8 10z"/>
                </svg>
                Villagers
            </a>
            <a href="shops.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M14 2H2L1 6v1c0 1.1.9 2 2 2 .4 0 .7-.1 1-.3.3.2.6.3 1 .3s.7-.1 1-.3c.3.2.6.3 1 .3s.7-.1 1-.3c.3.2.6.3 1 .3s.7-.1 1-.3c.3.2.6.3 1 .3 1.1 0 2-.9 2-2V6l-1-4zm-1 5c0 .6-.4 1-1 1s-1-.4-1-1V5h2v2zm-3-2v2c0 .6-.4 1-1 1s-1-.4-1-1V5h2zm-3 0v2c0 .6-.4 1-1 1s-1-.4-1-1V5h2zm-3 0v2c0 .6-.4 1-1 1s-1-.4-1-1V5h2zm11 4H2v6h12V9z"/>
                </svg>
                Shops
            </a>
            <a href="calendar.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M4 1v1H2v12h12V2h-2V1h-2v1H6V1H4zm8 3v1h2v1H2V5h2V4h8v0zM2 8h12v5H2V8z"/>
                </svg>
                Calendar
            </a>
            <a href="crafting.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M14 0H2L0 4v1h2l1 9h10l1-9h2V4L14 0zM2 3l1-2h10l1 2H2z"/>
                </svg>
                Crafting
            </a>
            <a href="items.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M1 1v6h6V1H1zm8 0v6h6V1H9zM1 9v6h6V9H1zm8 0v6h6V9H9z"/>
                </svg>
                Items
            </a>
            <a href="notes.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M2 2v12h12V2H2zm11 11H3V3h10v10zM4 5h8v1H4V5zm0 2h8v1H4V7zm0 2h5v1H4V9z"/>
                </svg>
                Notes
            </a>
            <a href="tasks.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M14 2H2v12h12V2zM6 12L3 9l1-1 2 2 4-4 1 1-5 5z"/>
                </svg>
                Daily Tasks
            </a>
            <a href="profit-calculator.html" class="nav-link active">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C6.3 0 5 1.3 5 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3zm0 5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 3h-2.5l-1.4 1.4c.6.4 1 1.1 1 1.9V14h3V8zm-11.1 1.4L1.5 8H1c-.6 0-1 .4-1 1v5h3v-2.7c0-.8.4-1.5 1-1.9L2.9 9.4zm7.2-.3L8 11.2 5.9 9.1c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l2.1 2.1v2.4h2.8v-2.4l2.1-2.1c.4-.4.4-1 0-1.4s-1-.4-1.4 0z"/>
                </svg>
                Profit Calc
            </a>
        </nav>

        <main class="content calculator-container">
            <div class="calculator-header">
                <h1>Crop Profit Calculator</h1>
                <p>Calculate and compare crop profits for optimal farming</p>
            </div>

            <div class="calculator-inputs">
                <div class="input-group">
                    <label for="season-select">Season</label>
                    <select id="season-select" class="input-control">
                        <option value="Spring">Spring</option>
                        <option value="Summer">Summer</option>
                        <option value="Fall">Fall</option>
                        <option value="Winter">Winter</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="day-input">Current Day (1-28)</label>
                    <input type="number" id="day-input" class="input-control" min="1" max="28" value="1">
                </div>

                <div class="input-group">
                    <label for="farming-level">Farming Level (0-10)</label>
                    <input type="number" id="farming-level" class="input-control" min="0" max="10" value="0">
                </div>

                <div class="input-group">
                    <label for="profession-select">Profession</label>
                    <select id="profession-select" class="input-control">
                        <option value="none">None</option>
                        <option value="tiller">Tiller (+10% sell price)</option>
                        <option value="agriculturist">Agriculturist (-10% growth time)</option>
                        <option value="both">Both</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="quality-select">Expected Quality</label>
                    <select id="quality-select" class="input-control">
                        <option value="normal">Normal (×1.0)</option>
                        <option value="silver">Silver (×1.25)</option>
                        <option value="gold">Gold (×1.5)</option>
                        <option value="iridium">Iridium (×2.0)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="processing-select">
                        Processing Method
                        <span class="info-tooltip" title="Process crops in Keg or Preserves Jar for higher profits">ⓘ</span>
                    </label>
                    <select id="processing-select" class="input-control">
                        <option value="none">None (Raw Crops)</option>
                        <option value="preserves-jar">Preserves Jar (×2 + 50g)</option>
                        <option value="keg">Keg (Juice/Wine)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="artisan-select">Artisan Profession</label>
                    <select id="artisan-select" class="input-control">
                        <option value="none">No Artisan (+0%)</option>
                        <option value="artisan">Artisan (+40% processed goods)</option>
                    </select>
                </div>

                <div class="input-group">
                    <button id="calculate-btn" class="primary-btn">Calculate Profits</button>
                </div>
            </div>

            <div class="results-summary" id="results-summary" style="display: none;">
                <div class="summary-card">
                    <div class="summary-title">Best Profit/Day</div>
                    <div class="summary-value" id="best-profit-day">-</div>
                    <div class="summary-crop" id="best-crop-day">-</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Best Total Profit</div>
                    <div class="summary-value" id="best-total-profit">-</div>
                    <div class="summary-crop" id="best-crop-total">-</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Best ROI</div>
                    <div class="summary-value" id="best-roi">-</div>
                    <div class="summary-crop" id="best-crop-roi">-</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Plantable Crops</div>
                    <div class="summary-value" id="plantable-count">-</div>
                    <div class="summary-crop">this season</div>
                </div>
            </div>

            <div class="results-controls">
                <div class="search-filter">
                    <input type="text" id="search-crops" placeholder="Search crops..." class="input-control">
                </div>
                <div class="sort-controls">
                    <label>Sort by:</label>
                    <select id="sort-select" class="input-control">
                        <option value="profitPerDay">Profit per Day</option>
                        <option value="totalProfit">Total Profit</option>
                        <option value="roi">ROI %</option>
                        <option value="name">Name</option>
                    </select>
                </div>
            </div>

            <div class="results-table-container">
                <table class="results-table" id="results-table">
                    <thead>
                        <tr>
                            <th>Crop</th>
                            <th>Seed Cost</th>
                            <th>Sell Price</th>
                            <th>Processing</th>
                            <th>Days</th>
                            <th>Harvests</th>
                            <th>Total Profit</th>
                            <th>Gold/Day</th>
                            <th>ROI %</th>
                        </tr>
                    </thead>
                    <tbody id="results-body">
                        <tr>
                            <td colspan="9" class="empty-results">
                                Click "Calculate Profits" to see results
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <footer class="statusbar">
            <div class="status-left" id="status-text">Ready to calculate</div>
            <div class="status-right">Crop Profit Calculator</div>
        </footer>
    </div>
</body>
</html>
